<?php try { ?>
    <?php if($block->isActivated()): ?>
        <?php if($block->isNewerVersion()): ?>
        <div class="dotpay-configuration-panel dotpay-error">
            <div class="dotpay-offer">
                <h3><?php echo __('Module update'); ?></h3>
                <p><?php echo __('Version of your Dotpay payment module is'); ?>: <?php echo $block->getModuleVersion(); ?></p>
                <p><?php echo __('The newest version is'); ?>: <?php echo $block->getAvailableVersion()->getNumber(); ?></p>
                <p>
                    <?php echo __('You can download the latest version from this link'); ?>:&nbsp;
                    <a href="<?php echo $block->getAvailableVersion()->getZip(); ?>" target="_blank"><?php echo __('DOWNLOAD'); ?></a>
                </p>
                <p>
                    <?php echo __('More details about the newest version'); ?>:&nbsp;
                    <a href="<?php echo $block->getAvailableVersion()->getUrl(); ?>" target="_blank"><?php echo __('DETAILS'); ?></a>
                </p>
            </div>
        </div>
        <?php else: ?>
        <div class="dotpay-configuration-panel dotpay-success">
            <div class="dotpay-offer">
                <h3><?php echo __('Version information'); ?></h3>
                <p><?php echo __('Congratulations ! Your Dotpay payment module is up to date.'); ?></p>
                <p><?php echo __('Version of the module is'); ?>: <?php echo $block->getModuleVersion(); ?></p>
                <p>
                    <?php echo __('More details about the newest version'); ?>:&nbsp;
                    <a href="<?php echo $block->getAvailableVersion()->getUrl(); ?>" target="_blank"><?php echo __('DETAILS'); ?></a>
                </p>
            </div>
        </div>
        <?php endif; ?>
    <?php else: ?>
        <div class="dotpay-configuration-panel dotpay-warning">
            <div class="dotpay-offer">
                <h3><?php echo __('Plugin message'); ?></h3>
                <p><?php echo __('Your plugin is not yet activated. Please fill required data and start to use Dotpay payments.'); ?></p>
            </div>
        </div>
    <?php endif; ?>
<?php } catch(\Exception $e) { ?>
<div class="dotpay-alert-error">
    <?php echo $e->getMessage(); ?>
</div>
<?php } ?>

<?php if($block->checkErrors()): ?>
    <?php foreach($block->checkErrors() as $error): ?>
    <div class="dotpay-configuration-panel dotpay-error">
        <div class="dotpay-offer">
            <h3><?php echo __('Error'); ?></h3>
            <p><?php echo $error->getMessage(); ?></p>
        </div>
    </div>
    <?php endforeach; ?>
<?php endif; ?>

<?php if($block->isRegisterDisplayed()): ?>

    <div class="dotpay-configuration-panel">
        <div class="dotpay-offer">
         <img src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAATCAYAAADPsWC5AAAABHNCSVQICAgIfAhkiAAABZ1JREFUWIXdl2mMFFUQx3+v3+s5e+fYQ1xQFxSyaBRFPEHFK4YjGE1AkWgMKqjEI8REjUZjjNF4xWg0Gj+oRCIYRYNnvBDE8AEBjYIrAYwY1HWBvZiZ3pnu6eeHnl56h11nl3gk/JOXVPerelVdx6tqSW3IWXXZJ0+MJeYoIVJ7XWfbMGT60aTM1kutzEOt0fisrrK7J+95HSOR/5cxE5imanEJkGcl6m6OGYblouW2vsKbI9GSlvKYqcnUbQBtRfuzDtf54TAN/qdxHjANkMb/bcn/CAUIIFczE45grAMagPQAJxgQaYnELhxtmiebwkiDXw4KIoOdooRItpjR6Vmlxtqe17W7VFyf88p7ANJSHj85bl3fINW4gP/UWPKaMWZkCsC2vsIHe11nBn5EwnCADmA90BZ6vxAYO4gZxQr/OmAHEAXuq+ytBb6s4l8KZICfgBWEDWg2I2cuyDS92aTMcQwDp8eTi2bW1T9aJ2Vjv/XaczYWcq99fKBraVaqcTPqsg+GZc5IWPMDep/rtO91nfsrRg+GMvAScGeFvh6Y/jcmlYBFwGog0Cs41Al34DtzNWEnJAxj1MLsUR+mpGrytNa7Sn3r9zilLZ7WjhDICxKp25Rh9GfDtGTq3tl12UcBOl3nVwcOCK3NRmWOn5ZMLRqlzInv9uy/9YsD3U/WK9UyOW5dBfCdnXt3v+vuBOgY2GW+wY8aQDMwG8gCS/Cj/DCwEthY9UECGA1cCcSBFwb56JpQAOcmUnekpGrSoN/q2XfLt3b+5ZCWyNREanFQEg1SnTSzLvOwIYTYXiys+bi3+56jlXmKrb2uY83IOZfWZe8ZH42fPzEWn/1Zrvvu8dHYJYETNtv513YU7fcqRydDdnwF3B16bgY24EdsKfA0flYMhduB5wALmDxSJxgAE2Ox2QAdrrMr7IDBMCVhLVTCMAG6yuXtk+KJ+fOzTa/MSdU/0Vl2fwn4zk6kFuNH6nDwB/B8hc4AZ4bsbQFOrVp9IdmGkSpTgGyQ5liAvU5pay2BZhU5DcDTWufK5f2/lPo2arpFwfP2HfDK7Z7W2hBC1EvVEhNG/UgNCiFcLi3AVGAZML6G3IgdrwQIUckIPQyBgBdgk51b3l12t+8s9b0fvOstlzszSjUACHHYmQADu0YSeAu//j3gN/yLMEAMGHO4igwNbq/n/QnQqNSJtQQ6XOfHgNb+rT0Anm8k3WX3d9vzOsN7YmRROvmgGkZXFsATwHH4GRGsBSE5J0SH750hYQDsLNprAJrNaOvEaHze3wlssfPLPK09QwghD50fhBIoT2u9xc6/DnglrfsjljLkqOEYhd8ZbqzQPQycF36qIVsEchX6tOEoUwAb8r3PnhG3rosaRvzaTNPy74uFuX+6TpuntVc9LLW7pU3r8r3PXmSlly7INq1od5x+Ay3DOMoyZOYP19m6Pt/zOECn6+4ua12WQsiLrcwDaanGlbRntxXtz/e5/UE7l4O9/WhgDnAMfhY8j98p3Iq9jwGTKs4J0BKiyxX+y4CLgFXA9xys9ky1E/rTszUav+KqdOOrSSkPYQrwVb7nxY96u5YIkBck0/dfbKXvjRpGPNj3tNY/9hU+eqd3/w2F0N/ivHTjyikJ6+rwWcu7OpZs7Ss8w9DDkgbeAG7Ar/9H8CfBWiU1F/gB+JSBzqnGauAKqg+MG0bjhEh8VoNSJyQMaVVL/Vy0N7QV7VXBs2XIMROisZkZqY4rel7vz6Xi2na3tKlazgDzpFhibrMZmRQR/tC1uZB7r90tfYLvhM34Yy/4Ee8AvsYfjsL39XT8P78soQu6CsvwI58GLgda8QepADcBKfzh65ohzvjPkMTv7xp46j/SOQqwKzofCl4eiX+RFgezKgwTvzxi+B3k7WDjSHSCBE4fYk8DXcBdQP9g+BehN9kEf0NbOQAAAABJRU5ErkJggg==' width='65' height='19' alt='Dotpay' style='vertical-align: text-bottom'>

        &nbsp;</div>
    </div>    

<?php endif; ?>
